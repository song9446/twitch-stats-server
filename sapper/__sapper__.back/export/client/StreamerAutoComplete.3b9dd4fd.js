import{S as e,i as s,s as t,e as r,a as l,t as a,c as n,b as c,d as i,f as o,g as h,h as u,l as d,j as p,k as f,m,n as _,o as g,p as v,q as x,r as w,u as b,v as E,w as k}from"./index.1cf7c1a4.js";function y(e,s,t){const r=Object.create(e);return r.streamer=s[t],r}function S(e){var s,t,_,g,v,x,w,b,E,k,y,S,I,j=e.streamer._left+"",N=e.streamer._center+"",P=e.streamer._right+"";function A(...s){return e.mousedown_handler(e,...s)}return{c(){s=r("li"),t=r("img"),g=l(),v=r("div"),x=r("span"),w=a(j),b=r("span"),E=a(N),k=r("span"),y=a(P),S=l(),this.h()},l(e){s=n(e,"LI",{class:!0},!1);var r=c(s);t=n(r,"IMG",{class:!0,src:!0},!1),c(t).forEach(i),g=o(r),v=n(r,"DIV",{class:!0},!1);var l=c(v);x=n(l,"SPAN",{},!1);var a=c(x);w=h(a,j),a.forEach(i),b=n(l,"SPAN",{class:!0},!1);var u=c(b);E=h(u,N),u.forEach(i),k=n(l,"SPAN",{},!1);var d=c(k);y=h(d,P),d.forEach(i),l.forEach(i),S=o(r),r.forEach(i),this.h()},h(){u(t,"class","rounded-full h-8 w-8"),u(t,"src",_=e.streamer.profile_image_url),u(b,"class","text-red-500"),u(v,"class","px-2"),u(s,"class","w-48 px-2 py-2 hover:bg-purple-500 hover:text-white text-black flex flex-row items-center truncate"),I=d(s,"mousedown",A)},m(e,r){p(e,s,r),f(s,t),f(s,g),f(s,v),f(v,x),f(x,w),f(v,b),f(b,E),f(v,k),f(k,y),f(s,S)},p(s,r){e=r,s.filtered_streamers&&_!==(_=e.streamer.profile_image_url)&&u(t,"src",_),s.filtered_streamers&&j!==(j=e.streamer._left+"")&&m(w,j),s.filtered_streamers&&N!==(N=e.streamer._center+"")&&m(E,N),s.filtered_streamers&&P!==(P=e.streamer._right+"")&&m(y,P)},d(e){e&&i(s),I()}}}function I(e){var s,t,a,h,m,k,I,j;let N=e.filtered_streamers,P=[];for(let s=0;s<N.length;s+=1)P[s]=S(y(e,N,s));return{c(){s=r("div"),t=r("input"),a=l(),h=_("svg"),m=_("path"),k=l(),I=r("ul");for(let e=0;e<P.length;e+=1)P[e].c();this.h()},l(e){s=n(e,"DIV",{class:!0},!1);var r=c(s);t=n(r,"INPUT",{placeholder:!0,class:!0},!1),c(t).forEach(i),a=o(r),h=n(r,"svg",{xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,style:!0,"xml:space":!0,width:!0,height:!0,id:!0,class:!0},!0);var l=c(h);m=n(l,"path",{d:!0},!0),c(m).forEach(i),l.forEach(i),k=o(r),I=n(r,"UL",{class:!0},!1);var u=c(I);for(let e=0;e<P.length;e+=1)P[e].l(u);u.forEach(i),r.forEach(i),this.h()},h(){u(t,"placeholder",e.placeholder),u(t,"class","px-2 border rounded focus:outline-none w-48 text-xs leading-loose pr-6"),u(m,"d","M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"),u(h,"xmlns","http://www.w3.org/2000/svg"),u(h,"xmlns:xlink","http://www.w3.org/1999/xlink"),u(h,"version","1.1"),u(h,"x","0px"),u(h,"y","0px"),u(h,"viewBox","0 0 56.966 56.966"),g(h,"enable-background","new 0 0 56.966 56.966"),u(h,"xml:space","preserve"),u(h,"width","512px"),u(h,"height","512px"),u(h,"id","Capa_1"),u(h,"class","h-3 w-3 text-gray-600 fill-current absolute top-0 right-0 mt-2 mr-2"),u(I,"class","absolute bg-white"),v(I,"hidden",!e.focused),u(s,"class","inline-block relative"),j=[d(t,"input",e.input_input_handler),d(t,"focus",e.focus_handler),d(t,"keyup",e.on_input_change),d(t,"blur",e.blur_handler)]},m(r,l){p(r,s,l),f(s,t),x(t,e.input_value),e.input_binding(t),f(s,a),f(s,h),f(h,m),f(s,k),f(s,I);for(let e=0;e<P.length;e+=1)P[e].m(I,null)},p(e,s){if(e.input_value&&t.value!==s.input_value&&x(t,s.input_value),e.placeholder&&u(t,"placeholder",s.placeholder),e.filtered_streamers){let t;for(N=s.filtered_streamers,t=0;t<N.length;t+=1){const r=y(s,N,t);P[t]?P[t].p(e,r):(P[t]=S(r),P[t].c(),P[t].m(I,null))}for(;t<P.length;t+=1)P[t].d(1);P.length=N.length}e.focused&&v(I,"hidden",!s.focused)},i:w,o:w,d(t){t&&i(s),e.input_binding(null),b(P,t),E(j)}}}function j(e,s,t){let r,l,a,{streamers:n=[],selected:c=null,placeholder:i="",onselect:o=(e=>{})}=s,h=!1,u=[];function d(e,s){t("filtered_streamers",u=s?e.filter(e=>e.name.search(s)>=0):[]);for(let e of u){let t=e.name.search(l);e._left=e.name.slice(0,t),e._center=l,e._right=e.name.slice(t+s.length)}}function p(e){t("selected",c=e),t("input_element",r.value=e.name,r),r.blur(),o(c),console.log("click")}return e.$set=(e=>{"streamers"in e&&t("streamers",n=e.streamers),"selected"in e&&t("selected",c=e.selected),"placeholder"in e&&t("placeholder",i=e.placeholder),"onselect"in e&&t("onselect",o=e.onselect)}),{streamers:n,selected:c,placeholder:i,onselect:o,input_element:r,input_value:l,focused:h,filtered_streamers:u,on_input_change:function(e){let s=l;a!=s&&(a=s,n.length?d(n,s):fetch("/api/thin-streamers?search="+l).then(e=>e.json()).then(e=>{d(e,s)}))},on_list_click:p,input_input_handler:function(){l=this.value,t("input_value",l)},input_binding:function(e){k[e?"unshift":"push"](()=>{t("input_element",r=e)})},focus_handler:e=>t("focused",h=!0),blur_handler:e=>t("focused",h=!1),mousedown_handler:({streamer:e},s)=>p(e)}}class N extends e{constructor(e){super(),s(this,e,j,I,t,["streamers","selected","placeholder","onselect"])}}export{N as S};

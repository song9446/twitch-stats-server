import{S as e,i as s,s as t,e as l,m as r,t as a,c as n,a as i,d as c,o,b as u,f as d,J as h,h as p,j as f,B as m,K as _,y as g,g as v,L as x,n as w,u as b,M as k,k as E}from"./index.dfef896d.js";import{A as y}from"./api.2d894ecb.js";function S(e,s,t){const l=Object.create(e);return l.streamer=s[t],l}function I(e){var s,t,_,g,v,x,w,b,k,E,y,S,I,j=e.streamer._left+"",A=e.streamer._center+"",L=e.streamer._right+"";function M(...s){return e.mousedown_handler(e,...s)}return{c(){s=l("li"),t=l("img"),g=r(),v=l("div"),x=l("span"),w=a(j),b=l("span"),k=a(A),E=l("span"),y=a(L),S=r(),this.h()},l(e){s=n(e,"LI",{class:!0},!1);var l=i(s);t=n(l,"IMG",{class:!0,src:!0},!1),i(t).forEach(c),g=o(l),v=n(l,"DIV",{class:!0},!1);var r=i(v);x=n(r,"SPAN",{},!1);var a=i(x);w=u(a,j),a.forEach(c),b=n(r,"SPAN",{class:!0},!1);var d=i(b);k=u(d,A),d.forEach(c),E=n(r,"SPAN",{},!1);var h=i(E);y=u(h,L),h.forEach(c),r.forEach(c),S=o(l),l.forEach(c),this.h()},h(){d(t,"class","rounded-full h-8 w-8"),d(t,"src",_=e.streamer.profile_image_url),d(b,"class","text-red-500"),d(v,"class","px-2"),d(s,"class","w-48 px-2 py-2 hover:bg-purple-500 hover:text-white text-black flex flex-row items-center truncate bg-white"),I=h(s,"mousedown",M)},m(e,l){p(e,s,l),f(s,t),f(s,g),f(s,v),f(v,x),f(x,w),f(v,b),f(b,k),f(v,E),f(E,y),f(s,S)},p(s,l){e=l,s.filtered_streamers&&_!==(_=e.streamer.profile_image_url)&&d(t,"src",_),s.filtered_streamers&&j!==(j=e.streamer._left+"")&&m(w,j),s.filtered_streamers&&A!==(A=e.streamer._center+"")&&m(k,A),s.filtered_streamers&&L!==(L=e.streamer._right+"")&&m(y,L)},d(e){e&&c(s),I()}}}function j(e){var s,t,a,u,m,E,y,j,A;let L=e.filtered_streamers,M=[];for(let s=0;s<L.length;s+=1)M[s]=I(S(e,L,s));return{c(){s=l("div"),t=l("input"),a=r(),u=_("svg"),m=_("path"),E=r(),y=l("ul");for(let e=0;e<M.length;e+=1)M[e].c();this.h()},l(e){s=n(e,"DIV",{class:!0},!1);var l=i(s);t=n(l,"INPUT",{placeholder:!0,id:!0,class:!0},!1),i(t).forEach(c),a=o(l),u=n(l,"svg",{xmlns:!0,"xmlns:xlink":!0,version:!0,x:!0,y:!0,viewBox:!0,style:!0,"xml:space":!0,width:!0,height:!0,id:!0,class:!0},!0);var r=i(u);m=n(r,"path",{d:!0},!0),i(m).forEach(c),r.forEach(c),E=o(l),y=n(l,"UL",{class:!0},!1);var d=i(y);for(let e=0;e<M.length;e+=1)M[e].l(d);d.forEach(c),l.forEach(c),this.h()},h(){d(t,"placeholder",e.placeholder),d(t,"id",e.inputid),d(t,"class","px-2 border rounded focus:outline-none w-48 text-xs leading-loose pr-6"),d(m,"d","M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"),d(u,"xmlns","http://www.w3.org/2000/svg"),d(u,"xmlns:xlink","http://www.w3.org/1999/xlink"),d(u,"version","1.1"),d(u,"x","0px"),d(u,"y","0px"),d(u,"viewBox","0 0 56.966 56.966"),g(u,"enable-background","new 0 0 56.966 56.966"),d(u,"xml:space","preserve"),d(u,"width","512px"),d(u,"height","512px"),d(u,"id","Capa_1"),d(u,"class","h-3 w-3 text-gray-600 fill-current absolute top-0 right-0 mt-2 mr-2"),d(y,"class","absolute bg-white"),v(y,"hidden",!e.focused),d(s,"class",j="inline-block relative "+e.classes),A=[h(t,"input",e.input_input_handler),h(t,"focus",e.focus_handler),h(t,"keyup",e.on_input_change),h(t,"blur",e.blur_handler)]},m(l,r){p(l,s,r),f(s,t),x(t,e.input_value),e.input_binding(t),f(s,a),f(s,u),f(u,m),f(s,E),f(s,y);for(let e=0;e<M.length;e+=1)M[e].m(y,null)},p(e,l){if(e.input_value&&t.value!==l.input_value&&x(t,l.input_value),e.placeholder&&d(t,"placeholder",l.placeholder),e.inputid&&d(t,"id",l.inputid),e.filtered_streamers){let s;for(L=l.filtered_streamers,s=0;s<L.length;s+=1){const t=S(l,L,s);M[s]?M[s].p(e,t):(M[s]=I(t),M[s].c(),M[s].m(y,null))}for(;s<M.length;s+=1)M[s].d(1);M.length=L.length}e.focused&&v(y,"hidden",!l.focused),e.classes&&j!==(j="inline-block relative "+l.classes)&&d(s,"class",j)},i:w,o:w,d(t){t&&c(s),e.input_binding(null),b(M,t),k(A)}}}function A(e,s,t){let l,r,{streamers:a=[],selected:n=null,placeholder:i="",onselect:c=(e=>{})}=s,{inputid:o="",classes:u=""}=s,d="",h=!1,p=[];function f(e,s){t("filtered_streamers",p=s?e.filter(e=>e.name.search(s)>=0):[]);for(let e of p){let t=e.name.search(d);e._left=e.name.slice(0,t),e._center=d,e._right=e.name.slice(t+s.length)}}function m(e){t("selected",n=e),t("input_element",l.value=e.name,l),l.blur(),c(n),console.log("click")}return e.$set=(e=>{"streamers"in e&&t("streamers",a=e.streamers),"selected"in e&&t("selected",n=e.selected),"placeholder"in e&&t("placeholder",i=e.placeholder),"onselect"in e&&t("onselect",c=e.onselect),"inputid"in e&&t("inputid",o=e.inputid),"classes"in e&&t("classes",u=e.classes)}),{streamers:a,selected:n,placeholder:i,onselect:c,inputid:o,classes:u,input_element:l,input_value:d,focused:h,filtered_streamers:p,on_input_change:function(e){let s=d;r!=s&&(r=s,a.length?f(a,s):y.thin_streamers(s).then(e=>{f(e,s)}))},on_list_click:m,input_input_handler:function(){d=this.value,t("input_value",d)},input_binding:function(e){E[e?"unshift":"push"](()=>{t("input_element",l=e)})},focus_handler:e=>t("focused",h=!0),blur_handler:e=>t("focused",h=!1),mousedown_handler:({streamer:e},s)=>m(e)}}class L extends e{constructor(e){super(),s(this,e,A,j,t,["streamers","selected","placeholder","onselect","inputid","classes"])}}export{L as S};
